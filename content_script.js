(function(){function e(e,t){e==="x"?document.documentElement.style.overflowX=t?"auto":"hidden":e==="y"?document.documentElement.style.overflowY=t?"auto":"hidden":e==="xy"&&(document.documentElement.style.overflowX=t?"auto":"hidden",document.documentElement.style.overflowY=t?"auto":"hidden")}function t(e,t,n){return e.name==="scroll-page"&&r(n),!0}function r(t){var r=document.body,i=document.documentElement,s=typeof document.width!="undefined"?document.width:typeof document.body!="undefined"&&document.body.scrollWidth>i.scrollWidth?document.body.scrollWidth:i.scrollWidth,o=typeof document.height!="undefined"?document.height:typeof document.body!="undefined"&&document.body.scrollHeight>i.scrollHeight?document.body.scrollHeight:i.scrollHeight,u=window.innerWidth,a=window.innerHeight,f=r.scrollWidth>i.clientWidth,l=[],c=250,h=a-(a>c?c:0),p=u,d=o-h+1,v,m;while(d>-h){v=0;while(v<s)l.push([v,d]),v+=p;d-=h}if(!l.length||l.length===0)return chrome.extension.sendMessage({name:"capture-visible-part"},function(e){}),t&&t();m=l.length,f&&e("xy",!1),function g(){if(!l.length||l.length===0)return window.scrollTo(0,0),f&&e("xy",!0),chrome.extension.sendMessage({name:"finished-scrolling"},function(e){}),t&&t();var r=l.shift(),i=r[0],u=r[1];return window.scrollTo(i,u),window.setTimeout(function(){var e={name:"capture-scrolling-page",x:window.scrollX*n,y:window.scrollY*n,complete:(m-l.length)/m,totalWidth:s*n,totalHeight:o*n};chrome.extension.sendMessage(e,function(e){typeof e!="undefined"&&g()})},200)}()}if(window!==window.top)return;window.qsnapRegisterHotkeys||(document.addEventListener("keyup",function(e){(e.ctrlKey||e.metaKey)&&e.keyCode&&chrome.extension.sendMessage({name:"keyboard-shortcut",keys:{altKey:e.altKey,shiftKey:e.shiftKey,keyCode:e.keyCode}})},!1),window.qsnapRegisterHotkeys=!0),window.qsnapCapture||(window.qsnapCapture=!0,chrome.extension.onMessage.addListener(t));var n=window.devicePixelRatio?window.devicePixelRatio:1})();