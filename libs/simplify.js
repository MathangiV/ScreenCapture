(function(e,t){"use strict";function n(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function r(e,t,n){var r=t.x,i=t.y,s=n.x-r,o=n.y-i,u;if(s!==0||o!==0)u=((e.x-r)*s+(e.y-i)*o)/(s*s+o*o),u>1?(r=n.x,i=n.y):u>0&&(r+=s*u,i+=o*u);return s=e.x-r,o=e.y-i,s*s+o*o}function i(e,t){var r,i=e.length,s,o=e[0],u=[o];for(r=1;r<i;r++)s=e[r],n(s,o)>t&&(u.push(s),o=s);return o!==s&&u.push(s),u}function s(e,n){var i=e.length,s=typeof Uint8Array!=t+""?Uint8Array:Array,o=new s(i),u=0,a=i-1,f,l,c,h,p=[],d=[],v=[];o[u]=o[a]=1;while(a){l=0;for(f=u+1;f<a;f++)c=r(e[f],e[u],e[a]),c>l&&(h=f,l=c);l>n&&(o[h]=1,p.push(u),d.push(h),p.push(h),d.push(a)),u=p.pop(),a=d.pop()}for(f=0;f<i;f++)o[f]&&v.push(e[f]);return v}var o=typeof exports!=t+""?exports:e;o.simplify=function(e,n,r){var o=n!==t?n*n:1;return r||(e=i(e,o)),e=s(e,o),e}})(this);